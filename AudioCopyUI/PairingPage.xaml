<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="AudioCopyUI.PairingPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:controls="using:Microsoft.UI.Xaml.Controls"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}"
    Loaded="Page_Loaded">

    <Grid Padding="12">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <!-- 左侧内容 -->
        <ScrollViewer Grid.Column="0" VerticalScrollBarVisibility="Auto">
            <StackPanel Orientation="Vertical" Margin="8">
                <TextBlock HorizontalAlignment="Center" FontSize="{StaticResource TextStyleExtraLargeFontSize}" Margin="0,0,0,10">作为接受端</TextBlock>

                <ScrollViewer Height="Auto" MinHeight="400" VerticalScrollBarVisibility="Auto">
                    <controls:ItemsRepeater x:Name="EmojiRepeater">
                        <controls:ItemsRepeater.Layout>
                            <controls:UniformGridLayout MinItemWidth="80" MinItemHeight="80" />
                        </controls:ItemsRepeater.Layout>
                        <controls:ItemsRepeater.ItemTemplate>
                            <DataTemplate x:DataType="x:String">
                                <Button Content="{x:Bind}" FontSize="36" Margin="4" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Click="EmojiButtonClicked" />
                            </DataTemplate>
                        </controls:ItemsRepeater.ItemTemplate>
                    </controls:ItemsRepeater>
                </ScrollViewer>

                <StackPanel Orientation="Vertical" Margin="0,10,0,0">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <TextBox x:Name="selectedText" IsReadOnly="True" FontSize="24" TextChanged="selectedText_TextChanged" />
                        <Button Grid.Column="1" Click="BackspaceButtonClick" Margin="8,0,0,0">
                            <FontIcon Glyph="&#xE750;" />
                        </Button>
                    </Grid>

                    <Grid Margin="0,10,0,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="2*" />
                            <ColumnDefinition Width="1.5*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <TextBox x:Name="addressListBox" PlaceholderText="获取的IP地址列表，也可以在这里手动输入" Margin="0,0,8,0" />
                        <TextBox Grid.Column="1" x:Name="portBox" PlaceholderText="端口号(只在对端提示输入时输入)" Margin="0,0,8,0" TextChanged="portBox_TextChanged" />
                        <Button Grid.Column="2" Click="IpSubmitButtonClick" x:Name="submitButton">提交</Button>
                    </Grid>
                </StackPanel>
            </StackPanel>
        </ScrollViewer>

        <!-- 右侧内容 -->
        <ScrollViewer Grid.Column="1" VerticalScrollBarVisibility="Auto">
            <StackPanel Orientation="Vertical" Margin="8">
                <TextBlock HorizontalAlignment="Center" FontSize="{StaticResource TextStyleExtraLargeFontSize}" Margin="0,0,0,10">作为发送端</TextBlock>
                <TextBlock HorizontalAlignment="Center" FontSize="{StaticResource TextStyleLargeFontSize}" Margin="0,0,0,10">在对端选择下列内容：</TextBlock>

                <TextBlock FontSize="72px" x:Name="connectionEmojiBox" TextWrapping="Wrap"></TextBlock>

                <TextBlock HorizontalAlignment="Center" FontSize="{StaticResource TextStyleLargeFontSize}" Margin="0,10,0,0">或者输入IP地址：</TextBlock>
                <TextBlock x:Name="ipAddressBox" MinHeight="60" FontSize="24" HorizontalAlignment="Center" TextWrapping="Wrap" />

                <Button x:Name="PairButton" Click="PairButton_Click" HorizontalAlignment="Center" Margin="0,10,0,0">刷新列表</Button>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</Page>